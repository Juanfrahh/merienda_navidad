<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Platos Principales</title>
    <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
    <div class="stars" id="stars"></div>

    <div class="snowflakes" id="snowflakes"></div>

    <div class="garland-top">
        <div class="christmas-lights" id="lights-top"></div>
    </div>

    <div class="garland-bottom">
        <div class="christmas-lights" id="lights-bottom"></div>
    </div>

    <div class="main-container">
        <h2 style="text-align: center; color: #b30000; font-family: 'Mountains of Christmas', cursive; font-size: 2.5em; margin-bottom: 20px;">ğŸ½ï¸ PLATOS ğŸ½ï¸ PRINCIPALES </h2>
        
        <div class="plato-seccion">
            <div class="plato-item" id="plato1">
                <h2>LasaÃ±a de GestiÃ³n Avanzada de la InformaciÃ³n</h2>
                <h4>Capas infinitas de documentos, PDFs que nadie revisa y una salsa secreta llamada "Â¿Pero dÃ³nde guardÃ© este archivo?".</h4>
            </div>

            <div id="div_p1" class="pregunta-container">
                <h3>ğŸ„ Pregunta 1 ğŸ„</h3>
                <p>Capas infinitas de documentos, PDFs que nadie revisa y una salsa secreta llamada "Â¿Pero dÃ³nde guardÃ© este archivo?"</p>
                <form id="form_principales1">
                    <div class="radio-option">
                        <input type="radio" id="m1_r1" name="principal1_name" value="m1_r1">
                        <label for="m1_r1">Estofado de GestiÃ³n Financiera</label>
                    </div>

                    <div class="radio-option">
                        <input type="radio" id="m1_r2" name="principal1_name" value="m1_r2">
                        <label for="m1_r2">LasaÃ±a de GestiÃ³n Avanzada de la InformaciÃ³n</label>
                    </div>

                    <div class="radio-option">
                        <input type="radio" id="m1_r3" name="principal1_name" value="m1_r3">
                        <label for="m1_r3">Linguini de Lenguaje de Marcas</label>
                    </div>

                    <div class="radio-option">
                        <input type="radio" id="m1_r4" name="principal1_name" value="m1_r4">
                        <label for="m1_r4">Pincho de Contabilidad</label>
                    </div>

                    <button type="button" class="boton" onclick="verificarRespuesta('pregunta10')">Enviar respuesta</button>
                </form>
            </div>
        </div>

        <div class="plato-seccion">
            <div class="plato-item" id="plato2">
                <h2>Estofado de GestiÃ³n Financiera</h2>
                <h4>CocciÃ³n lenta de presupuestos, gastos y previsiones, servido con aroma a "este Excel pide clemencia".</h4>
            </div>

            <div id="div_p2" class="pregunta-container" style="display: none">
                <h3>ğŸ„ Pregunta 2 ğŸ„</h3>
                <p>CocciÃ³n lenta de presupuestos, gastos y previsiones, servido con aroma a â€œeste Excel pide clemenciaâ€.</p>
                <form id="form_principales2">
                    <div class="radio-option">
                        <input type="radio" id="m2_r1" name="principal2_name" value="m2_r1">
                        <label for="m2_r1">Estofado de GestiÃ³n Financiera</label>
                    </div>

                    <div class="radio-option">
                        <input type="radio" id="m2_r2" name="principal2_name" value="m2_r2">
                        <label for="m2_r2">LasaÃ±a de GestiÃ³n Avanzada de la InformaciÃ³n</label>
                    </div>

                    <div class="radio-option">
                        <input type="radio" id="m2_r3" name="principal2_name" value="m2_r3">
                        <label for="m2_r3">Linguini de Lenguaje de Marcas</label>
                    </div>

                    <div class="radio-option">
                        <input type="radio" id="m2_r4" name="principal2_name" value="m2_r4">
                        <label for="m2_r4">Ensalada de Protocolo</label>
                    </div>

                    <button type="button" class="boton" onclick="verificarRespuesta('pregunta11')">Enviar respuesta</button>
                </form>
            </div>
        </div>

        <div class="plato-seccion">
            <div class="plato-item" id="plato3">
                <h2>Linguini de Lenguaje de Marcas</h2>
                <h4>Tiras de etiquetas perfectamente ordenadas, con un aliÃ±o suave de HTML que se rompe por un cierre mal puesto.</h4>
            </div>

            <div id="div_p3" class="pregunta-container" style="display: none">
                <h3>ğŸ„ Pregunta 3 ğŸ„</h3>
                <p>Tiras de etiquetas perfectamente ordenadas, con un aliÃ±o suave de HTML que se rompe por un cierre mal puesto.</p>
                <form id="form_principales3">
                    <div class="radio-option">
                        <input type="radio" id="m3_r1" name="principal3_name" value="m3_r1">
                        <label for="m3_r1">Estofado de GestiÃ³n Financiera</label>
                    </div>

                    <div class="radio-option">
                        <input type="radio" id="m3_r2" name="principal3_name" value="m3_r2">
                        <label for="m3_r2">LasaÃ±a de GestiÃ³n Avanzada de la InformaciÃ³n</label>
                    </div>

                    <div class="radio-option">
                        <input type="radio" id="m3_r3" name="principal3_name" value="m3_r3">
                        <label for="m3_r3">Linguini de Lenguaje de Marcas</label>
                    </div>

                    <div class="radio-option">
                        <input type="radio" id="m3_r4" name="principal3_name" value="m3_r4">
                        <label for="m3_r4">Malteada de Desarrollo de Aplicaciones</label>
                    </div>

                    <button type="button" class="boton" onclick="verificarRespuesta('pregunta12')">Enviar respuesta</button>
                </form>
            </div>
        </div>
        
        <div id="div_continuar" class="pregunta-container" style="display: none">
            <a href="postres.html" class="boton">Continuar a Postres</a>
        </div>
    </div>

    <div id="modalOverlay" class="modal-overlay">
        <div id="modalContent" class="modal-content">
            <div id="modalIcon" class="modal-icon"></div>
            <h3 id="modalTitle"></h3>
            <p id="modalMessage"></p>
            <button id="modalButton" onclick="cerrarModal()">Aceptar</button>
        </div>
    </div>

    <!-- Audios para efectos de sonido -->
    <audio id="audio-correcto" src="sounds/cascabeles.mp3" preload="auto"></audio>
    <audio id="audio-incorrecto" src="sounds/hohoho.mp3" preload="auto"></audio>

    <script>
        if (localStorage.getItem("entrantes_superado") !== "yes") {
            window.location.href = "entrantes.html";
        }
        
        // LÃ“GICA DE ESTRELLAS, NIEVE Y LUCES
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            starsContainer.appendChild(star);
        }

        const snowflakesContainer = document.getElementById('snowflakes');
        for (let i = 0; i < 50; i++) {
            const snowflake = document.createElement('div');
            snowflake.className = 'snowflake';
            snowflake.innerHTML = 'â„';
            snowflake.style.left = Math.random() * 100 + '%';
            snowflake.style.animationDuration = (Math.random() * 3 + 5) + 's';
            snowflake.style.animationDelay = Math.random() * 5 + 's';
            snowflake.style.fontSize = (Math.random() * 10 + 10) + 'px';
            snowflake.style.opacity = Math.random() * 0.6 + 0.4;
            snowflakesContainer.appendChild(snowflake);
        }

        const lightsTopContainer = document.getElementById('lights-top');
        const lightsBottomContainer = document.getElementById('lights-bottom');
        for (let i = 0; i < 20; i++) {
            const light1 = document.createElement('div');
            light1.className = 'light';
            lightsTopContainer.appendChild(light1);

            const light2 = document.createElement('div');
            light2.className = 'light';
            lightsBottomContainer.appendChild(light2);
        }

        // LÃ“GICA DEL MODAL Y RESPUESTAS
        let modalData = { platoId: null, div_desaparece: null, div_aparece: null };

        function mostrarModal(tipo, titulo, mensaje, platoId = null, divDesaparece = null, divAparece = null) {
            const overlay = document.getElementById('modalOverlay');
            const content = document.getElementById('modalContent');
            const icon = document.getElementById('modalIcon');
            const titleEl = document.getElementById('modalTitle');
            const messageEl = document.getElementById('modalMessage');

            const sonidoCorrecto = document.getElementById('audio-correcto');
            const sonidoIncorrecto = document.getElementById('audio-incorrecto');

            // Reproducir sonido segÃºn tipo
            if (tipo === 'correcto' || tipo === 'completado') {
                sonidoCorrecto.currentTime = 0;
                sonidoCorrecto.play();
                modalData.platoId = platoId;
                modalData.div_desaparece = divDesaparece;
                modalData.div_aparece = divAparece;
            } else {
                sonidoIncorrecto.currentTime = 0;
                sonidoIncorrecto.play();
                modalData = { platoId: null, div_desaparece: null, div_aparece: null };
            }

            // Configurar modal
            content.className = tipo === 'correcto' ? 'modal-content correcto' :
                                tipo === 'completado' ? 'modal-content completado' : 'modal-content incorrecto';

            icon.innerHTML = tipo === 'correcto' ? 'ğŸ„' :
                             tipo === 'completado' ? 'ğŸ‰' : 'ğŸ…';
            titleEl.innerHTML = titulo;
            messageEl.innerHTML = mensaje;

            // Copos de nieve
            const oldSnowflakes = content.querySelectorAll('.modal-snowflake');
            oldSnowflakes.forEach(s => s.remove());
            for (let i = 0; i < 8; i++) {
                const snowflake = document.createElement('div');
                snowflake.className = 'modal-snowflake';
                snowflake.innerHTML = 'â„';
                snowflake.style.left = Math.random() * 100 + '%';
                snowflake.style.animationDelay = Math.random() * 2 + 's';
                content.appendChild(snowflake);
            }

            overlay.style.display = 'flex';
        }

        function cerrarModal() {
            const overlay = document.getElementById('modalOverlay');
            if (modalData.platoId || modalData.div_desaparece) {
                if (modalData.platoId) document.getElementById(modalData.platoId).classList.add('desbloqueado');
                if (modalData.div_desaparece) document.getElementById(modalData.div_desaparece).style.display = "none";
                if (modalData.div_aparece) document.getElementById(modalData.div_aparece).style.display = "block";
                centrarPregunta(modalData.div_aparece);
                modalData = { platoId: null, div_desaparece: null, div_aparece: null };
            }
            overlay.style.display = 'none';
        }

        function verificarRespuesta(pregunta) {
            let nameAttribute = pregunta === 'pregunta10' ? 'principal1_name' :
                                pregunta === 'pregunta11' ? 'principal2_name' : 'principal3_name';

            const opciones = document.getElementsByName(nameAttribute);
            let seleccionada = null;
            for (let i = 0; i < opciones.length; i++) {
                if (opciones[i].checked) { seleccionada = opciones[i].value; break; }
            }

            if (!seleccionada) {
                mostrarModal('incorrecto', 'Â¡AtenciÃ³n!', 'Por favor, selecciona una respuesta.');
                return;
            }

            let platoId, div_desaparece, div_aparece, respuestaCorrecta, esUltima = false;
            switch(pregunta) {
                case 'pregunta10':
                    respuestaCorrecta = 'm1_r2'; platoId='plato1'; div_desaparece='div_p1'; div_aparece='div_p2'; break;
                case 'pregunta11':
                    respuestaCorrecta = 'm2_r1'; platoId='plato2'; div_desaparece='div_p2'; div_aparece='div_p3'; break;
                case 'pregunta12':
                    respuestaCorrecta = 'm3_r3'; platoId='plato3'; div_desaparece='div_p3'; div_aparece='div_continuar'; esUltima=true; break;
            }

            if (seleccionada === respuestaCorrecta) {
                if (esUltima) {
                    mostrarModal('completado', 'ğŸŠ Â¡Felicidades! ğŸŠ', 'Â¡Has completado el menÃº de platos principales navideÃ±os!', platoId, div_desaparece, div_aparece);
                    localStorage.setItem("principales_superado", "yes");   // â† AÃ‘ADIDO AQUÃ
                }
                else {
                    mostrarModal('correcto', 'Â¡Respuesta Correcta! ğŸ‰', 'Â¡Has desbloqueado un plato navideÃ±o!', platoId, div_desaparece, div_aparece);
                }
            } else {
                mostrarModal('incorrecto', 'Â¡Respuesta Incorrecta! âŒ', 'Vuelve a intentarlo. Â¡TÃº puedes!');
            }
        }

        function centrarPregunta(idPregunta) {
            const elemento = document.getElementById(idPregunta);
            if (elemento) {
                const rect = elemento.getBoundingClientRect();
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                const elementoCentro = rect.top + scrollTop - (window.innerHeight / 2) + (rect.height / 2);

                window.scrollTo({
                    top: elementoCentro,
                    behavior: 'smooth'
                });

                window.addEventListener('load', () => {
                    centrarPregunta('div_p1');
                });
            }
        }

        window.addEventListener('load', () => {
            centrarPregunta('div_p1');
        });
    </script>
</body>
</html>
